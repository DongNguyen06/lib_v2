{% extends "layout.html" %}

{% block title %}Register - City Library{% endblock %}

{% block content %}
<div class="min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8">
    <div class="max-w-md w-full">
        <a href="{{ url_for('home') }}" class="mb-6 flex items-center gap-2 text-gray-600 hover:text-gray-900">
            <i class="fas fa-arrow-left"></i>
            Back to Home
        </a>

        <div class="bg-white rounded-lg shadow-md p-8">
            <h2 class="text-3xl font-bold text-gray-900 mb-6 text-center">Create Your Account</h2>

            <form method="POST" action="{{ url_for('register') }}" class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Full Name</label>
                    <input
                        type="text"
                        name="name"
                        required
                        class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                    />
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                    <input
                        type="email"
                        name="email"
                        required
                        class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                    />
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Phone Number</label>
                    <input
                        type="tel"
                        name="phone"
                        id="phone"
                        required
                        pattern="[0-9]{1,10}"
                        maxlength="10"
                        title="Only numbers, maximum 10 digits"
                        class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                    />
                    <p class="text-xs text-gray-500 mt-1">Only numbers, maximum 10 digits</p>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Birthday (Optional)</label>
                    <input
                        type="date"
                        name="birthday"
                        class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                    />
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Password</label>
                    <input
                        type="password"
                        name="password"
                        required
                        minlength="6"
                        class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                    />
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Confirm Password</label>
                    <input
                        type="password"
                        name="confirm_password"
                        required
                        minlength="6"
                        class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                    />
                </div>

                <button
                    type="submit"
                    class="w-full py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-semibold"
                >
                    Register
                </button>
            </form>

            <div class="mt-6 text-center">
                <p class="text-sm text-gray-600">
                    Already have an account?
                    <a href="{{ url_for('login') }}" class="text-blue-600 hover:text-blue-700 font-semibold">
                        Login here
                    </a>
                </p>
            </div>
        </div>
    </div>
</div>

<script>
    // Validate phone number input
    const phoneInput = document.getElementById('phone');
    
    phoneInput.addEventListener('input', function(e) {
        // Remove all non-digit characters
        this.value = this.value.replace(/\D/g, '');
        
        // Limit to 10 digits
        if (this.value.length > 10) {
            this.value = this.value.slice(0, 10);
        }
    });
    
    // Validate on form submit
    document.querySelector('form').addEventListener('submit', function(e) {
        const phone = phoneInput.value;
        
        if (!/^\d+$/.test(phone)) {
            e.preventDefault();
            alert('Số điện thoại chỉ được chứa số!');
            phoneInput.focus();
            return false;
        }
        
        if (phone.length > 10) {
            e.preventDefault();
            alert('Số điện thoại không được vượt quá 10 số!');
            phoneInput.focus();
            return false;
        }
    });
</script>
{% endblock %}
